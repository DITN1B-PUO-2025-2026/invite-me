name: Invite user on issue label
on:
  issues:
    types: [labeled]

jobs:
  invite:
    runs-on: ubuntu-latest
    permissions:
      issues: write # Needed for the action to post comments (the "Welcome" message)
      contents: read
    steps:
      - name: Invite on label
        uses: vj-abigo/invite-on-label@v1.4
        with:
          organization: DITN1B-PUO-2025-2026
          label: ${{ secrets.INVITE_LABEL_KEY }}
          # REMOVE: repo-token is not the correct input for this specific action
          # repo-token: ${{ secrets.INVITE_TOKEN }} 
          comment: 'Welcome to the Org. You have been invited successfully! ðŸŽ‰'
          existingMemberMessage: 'You are already a member of the organization :D '
        # FIX: Pass the token as an environment variable named INVITE_TOKEN
        env:
          INVITE_TOKEN: ${{ secrets.INVITE_TOKEN }}